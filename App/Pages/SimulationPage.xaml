<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="App.Pages.SimulationPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App"
    xmlns:controls="using:App.Controls"
    xmlns:converters="using:App.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

	<Page.Resources>
		<converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
		<SolidColorBrush x:Key="InitializationBrush" Color="#2D7D2D"/>
		<SolidColorBrush x:Key="MixerBrush" Color="#CA5010"/>
		<SolidColorBrush x:Key="WarehouseBrush" Color="#0078D4"/>
	</Page.Resources>

	<ScrollViewer>
		<StackPanel Padding="16" Spacing="16" HorizontalAlignment="Center">

			<!-- Process Flow Chart -->
			<StackPanel Spacing="16">
				<TextBlock Text="Production Process Flow"
                           Style="{StaticResource TitleTextBlockStyle}"/>

				<Grid HorizontalAlignment="Center">
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto"/>
						<RowDefinition Height="60"/>
						<RowDefinition Height="Auto"/>
						<RowDefinition Height="60"/>
						<RowDefinition Height="Auto"/>
					</Grid.RowDefinitions>

					<!-- Initialization Station -->
					<controls:StationControl x:Name="InitializationStation"
                                             StationTitle="Initialization Station"
                                             Image="/Assets/Stations/generic.png"
                                             BorderColor="{StaticResource InitializationBrush}"
                                             HasAttributes="True">

						<!-- Telemetry Section Content -->
						<controls:StationControl.TelemetrySection>
							<Grid ColumnSpacing="8" RowSpacing="8">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="Auto"/>
									<ColumnDefinition Width="*"/>
								</Grid.ColumnDefinitions>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto"/>
									<RowDefinition Height="Auto"/>
									<RowDefinition Height="Auto"/>
								</Grid.RowDefinitions>

								<!-- Interval -->
								<TextBlock Text="Interval (s):" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0"/>
								<NumberBox Value="{x:Bind InitializationStation.ViewModel.TelemetryIntervalSeconds, Mode=TwoWay}"
                                           SpinButtonPlacementMode="Inline"
                                           SmallChange="1"
                                           Minimum="1"
                                           Grid.Row="0" Grid.Column="1"/>

								<!-- Power -->
								<TextBlock Text="Power (Wh):" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0"/>
								<NumberBox Value="{x:Bind InitializationStation.ViewModel.TelemetryDataPoints[0].Value, Mode=TwoWay}"
                                           SpinButtonPlacementMode="Inline"
                                           SmallChange="10"
                                           Minimum="300"
                                           Maximum="600"
                                           IsEnabled="{x:Bind InitializationStation.ViewModel.TelemetryDataPoints[0].CanEditValue, Mode=OneWay}"
                                           Grid.Row="1" Grid.Column="1"/>

								<!-- Random Mode -->
								<CheckBox Content="Use random values (300-600 Wh)"
                                          IsChecked="{x:Bind InitializationStation.ViewModel.TelemetryDataPoints[0].UseRandom, Mode=TwoWay}"
                                          Grid.Row="2" Grid.ColumnSpan="2"/>
							</Grid>
						</controls:StationControl.TelemetrySection>

						<!-- Attributes Section Content -->
						<controls:StationControl.AttributesSection>
							<Grid ColumnSpacing="8">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="Auto"/>
									<ColumnDefinition Width="*"/>
								</Grid.ColumnDefinitions>
								<TextBlock Text="Order Number:" VerticalAlignment="Center" Grid.Column="0"/>
								<TextBox Text="{x:Bind InitializationStation.ViewModel.Attributes[0].Value, Mode=TwoWay}"
										 PlaceholderText="e.g. 65535"
                                         Grid.Column="1"/>
							</Grid>
						</controls:StationControl.AttributesSection>
					</controls:StationControl>

					<!-- Arrow Down -->
					<StackPanel Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center">
						<FontIcon Glyph="&#xE96E;" FontSize="40" Foreground="{ThemeResource SystemAccentColor}"/>
					</StackPanel>

					<!-- Mixer Station -->
					<controls:StationControl
                        x:Name="MixerStation"
						Grid.Row="2"
						StationTitle="Mixer Station"
						Image="/Assets/Stations/machine.png"
						BorderColor="{StaticResource MixerBrush}"
						HasAttributes="True">

						<controls:StationControl.TelemetrySection>
							<Grid ColumnSpacing="8" RowSpacing="8">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="Auto"/>
									<ColumnDefinition Width="*"/>
								</Grid.ColumnDefinitions>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto"/>
									<RowDefinition Height="Auto"/>
									<RowDefinition Height="Auto"/>
								</Grid.RowDefinitions>

								<!-- Interval -->
								<TextBlock Text="Interval (s):" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0"/>
								<NumberBox Value="{x:Bind MixerStation.ViewModel.TelemetryIntervalSeconds, Mode=TwoWay}"
                                           SpinButtonPlacementMode="Inline"
                                           SmallChange="1"
                                           Minimum="1"
                                           Grid.Row="0"
                                           Grid.Column="1"/>

								<!-- Agitator Speed -->
								<TextBlock Text="Agitator Speed (rpm):" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0"/>
								<NumberBox Value="{x:Bind MixerStation.ViewModel.TelemetryDataPoints[0].Value, Mode=TwoWay}"
                                           SpinButtonPlacementMode="Inline"
                                           SmallChange="10"
                                           Minimum="1000"
                                           Maximum="2000"
                                           IsEnabled="{x:Bind MixerStation.ViewModel.TelemetryDataPoints[0].CanEditValue, Mode=OneWay}"
                                           Grid.Row="1"
                                           Grid.Column="1"/>

								<!-- Random Mode -->
								<CheckBox Content="Use random values (1000-2000 rpm)"
                                          IsChecked="{x:Bind MixerStation.ViewModel.TelemetryDataPoints[0].UseRandom, Mode=TwoWay}"
                                          Grid.Row="2"
                                          Grid.ColumnSpan="2"/>
							</Grid>
						</controls:StationControl.TelemetrySection>

						<controls:StationControl.AttributesSection>
							<Grid ColumnSpacing="8">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="Auto"/>
									<ColumnDefinition Width="*"/>
								</Grid.ColumnDefinitions>
								<TextBlock Text="Agitator ID:" VerticalAlignment="Center" Grid.Column="0"/>
								<TextBox Text="{x:Bind MixerStation.ViewModel.Attributes[0].Value, Mode=TwoWay}"
                                         PlaceholderText="e.g. AGITATOR-A1"
                                         Grid.Column="1"/>
							</Grid>
						</controls:StationControl.AttributesSection>
					</controls:StationControl>

					<!-- Arrow Down -->
					<StackPanel Grid.Row="3" HorizontalAlignment="Center" VerticalAlignment="Center">
						<FontIcon Glyph="&#xE96E;" FontSize="40" Foreground="{ThemeResource SystemAccentColor}"/>
					</StackPanel>

					<!-- Warehouse Station -->
					<controls:StationControl x:Name="WarehouseStation"
                                             Grid.Row="4"
                                             StationTitle="Warehouse Station"
                                             Image="/Assets/Stations/storage.png"
                                             BorderColor="{StaticResource WarehouseBrush}"
                                             HasAttributes="False">

						<controls:StationControl.TelemetrySection>
							<Grid ColumnSpacing="8" RowSpacing="8">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="Auto"/>
									<ColumnDefinition Width="*"/>
								</Grid.ColumnDefinitions>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto"/>
									<RowDefinition Height="Auto"/>
									<RowDefinition Height="Auto"/>
								</Grid.RowDefinitions>

								<!-- Interval -->
								<TextBlock Text="Interval (s):" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0"/>
								<NumberBox Value="{x:Bind WarehouseStation.ViewModel.TelemetryIntervalSeconds, Mode=TwoWay}"
                                           SpinButtonPlacementMode="Inline"
                                           SmallChange="1"
                                           Minimum="1"
                                           Grid.Row="0" Grid.Column="1"/>

								<!-- Temperature -->
								<TextBlock Text="Temperature (°C):" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0"/>
								<NumberBox Value="{x:Bind WarehouseStation.ViewModel.TelemetryDataPoints[0].Value, Mode=TwoWay}"
                                           SpinButtonPlacementMode="Inline"
                                           SmallChange="0.5"
                                           Minimum="20"
                                           Maximum="30"
                                           IsEnabled="{x:Bind WarehouseStation.ViewModel.TelemetryDataPoints[0].CanEditValue, Mode=OneWay}"
                                           Grid.Row="1" Grid.Column="1"/>

								<!-- Random Mode -->
								<CheckBox Content="Use random values (20-30 °C)"
                                          IsChecked="{x:Bind WarehouseStation.ViewModel.TelemetryDataPoints[0].UseRandom, Mode=TwoWay}"
                                          Grid.Row="2" Grid.ColumnSpan="2"/>
							</Grid>
						</controls:StationControl.TelemetrySection>
					</controls:StationControl>
				</Grid>
			</StackPanel>
		</StackPanel>
	</ScrollViewer>
</Page>
